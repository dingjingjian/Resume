(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["user"],{1348:function(e,r,t){"use strict";t.r(r);var o=function(){var e=this,r=e._self._c;return r("div",{staticClass:"main user-layout-register"},[e._m(0),r("a-form-model",{ref:"form",attrs:{model:e.form,rules:e.rules}},[e.isRegisterError?r("a-alert",{staticStyle:{"margin-bottom":"24px"},attrs:{type:"error",showIcon:"",message:e.registerErrorInfo,closable:"","after-close":e.handleCloseRegisterError}}):e._e(),r("a-form-model-item",{attrs:{prop:"username"}},[r("a-input",{attrs:{size:"large",autocomplete:"off",placeholder:"账户"},model:{value:e.form.username,callback:function(r){e.$set(e.form,"username",r)},expression:"form.username"}})],1),r("a-form-model-item",{attrs:{"has-feedback":"",prop:"password"}},[r("a-input-password",{attrs:{size:"large",autocomplete:"off",placeholder:"密码",maxLength:20},model:{value:e.form.password,callback:function(r){e.$set(e.form,"password",r)},expression:"form.password"}})],1),r("a-form-model-item",{attrs:{"has-feedback":"",prop:"confirmPassword"}},[r("a-input-password",{attrs:{size:"large",autocomplete:"off",placeholder:"确认密码",maxLength:20},model:{value:e.form.confirmPassword,callback:function(r){e.$set(e.form,"confirmPassword",r)},expression:"form.confirmPassword"}})],1),e.captchaOnOff?r("a-row",{attrs:{gutter:16}},[r("a-col",{staticClass:"gutter-row",attrs:{span:16}},[r("a-form-model-item",{attrs:{prop:"code"}},[r("a-input",{attrs:{size:"large",type:"text",autocomplete:"off",placeholder:"验证码"},model:{value:e.form.code,callback:function(r){e.$set(e.form,"code",r)},expression:"form.code"}},[r("a-icon",{style:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"security-scan"},slot:"prefix"})],1)],1)],1),r("a-col",{staticClass:"gutter-row",attrs:{span:8}},[r("img",{staticClass:"getCaptcha",attrs:{src:e.codeUrl},on:{click:e.getCode}})])],1):e._e(),r("a-form-item",[r("a-button",{staticClass:"register-button",attrs:{size:"large",type:"primary",htmlType:"submit",loading:e.registering,disabled:e.registering},on:{click:function(r){return r.stopPropagation(),r.preventDefault(),e.handleRegister.apply(null,arguments)}}},[e._v(" 注册 ")]),r("router-link",{staticClass:"login",attrs:{to:{name:"login"}}},[e._v("使用已有账户登录")])],1)],1)],1)},s=[function(){var e=this,r=e._self._c;return r("h3",[r("span",[e._v("注册")])])}],a=(t("ac1f"),t("d3b7"),t("7ded")),i={name:"Register",components:{},data:function(){var e=this,r=function(r,t,o){""===t?o(new Error("请输入新密码")):/^(?![\d]+$)(?![a-zA-Z]+$)(?![^\da-zA-Z]+$)([^\u4e00-\u9fa5\s]){5,20}$/.test(t)?(""!==e.form.confirmPassword&&e.$refs.form.validateField("confirmPassword"),o()):o(new Error("请输入5-20位英文字母、数字或者符号（除空格），且字母、数字和标点符号至少包含两种"))},t=function(r,t,o){""===t?o(new Error("请再次输入新密码确认")):t!==e.form.password?o(new Error("两次输入的密码不一致")):o()};return{codeUrl:"",isRegisterError:!1,registerErrorInfo:"",form:{username:void 0,password:void 0,confirmPassword:void 0,code:void 0,uuid:void 0},rules:{username:[{required:!0,trigger:"blur",message:"请输入您的账号"},{min:2,max:20,message:"用户账号长度必须介于 2 和 20 之间",trigger:"blur"}],password:[{required:!0,trigger:"blur",message:"请输入您的密码"},{required:!0,validator:r,trigger:"blur"}],confirmPassword:[{required:!0,trigger:"blur",message:"请再次输入您的密码"},{required:!0,validator:t,trigger:"blur"}],code:[{required:!0,trigger:"change",message:"请输入验证码"}]},registerBtn:!1,registering:!1,captchaOnOff:!0}},computed:{},created:function(){this.getCode()},methods:{getCode:function(){var e=this;Object(a["a"])().then((function(r){e.captchaOnOff=void 0===r.captchaOnOff||r.captchaOnOff,e.captchaOnOff&&(e.codeUrl="data:image/gif;base64,"+r.img,e.form.uuid=r.uuid)}))},handleRegister:function(){var e=this;this.$refs.form.validate((function(r){r?(e.registering=!0,Object(a["e"])(e.form).then((function(r){return e.registerSuccess(r)})).catch((function(r){return e.requestFailed(r)})).finally((function(){e.registering=!1}))):setTimeout((function(){e.registering=!1}),600)}))},registerSuccess:function(e){var r=this;this.$router.push({path:"/login"});var t=this.form.username;setTimeout((function(){r.$notification.success({message:"恭喜你，您的账号 "+t+" 注册成功！"})}),1e3),this.handleCloseRegisterError()},requestFailed:function(e){this.isRegisterError=!0,this.registerErrorInfo=e,this.form.code=void 0,this.captchaOnOff&&this.getCode()},handleCloseRegisterError:function(){this.isRegisterError=!1,this.registerErrorInfo=""}}},n=i,c=(t("56c8"),t("2efd"),t("2877")),l=Object(c["a"])(n,o,s,!1,null,"365a1d7f",null);r["default"]=l.exports},"2efd":function(e,r,t){"use strict";t("316b")},"316b":function(e,r,t){},"56c8":function(e,r,t){"use strict";t("e0ab")},"6a71a":function(e,r,t){"use strict";t("a0b9")},a0b9:function(e,r,t){},ac2a:function(e,r,t){"use strict";t.r(r);var o=function(){var e=this,r=e._self._c;return r("div",{staticClass:"main"},[r("a-form-model",{ref:"form",staticClass:"user-layout-login",attrs:{id:"formLogin",model:e.form,rules:e.rules}},[r("h2",{staticStyle:{"text-align":"center"}},[e._v("账号密码登录")]),e.isLoginError&&e.loginErrorInfo?r("a-alert",{staticStyle:{"margin-bottom":"24px"},attrs:{type:"error",showIcon:"",message:e.loginErrorInfo,closable:"","after-close":e.handleCloseLoginError}}):e._e(),r("a-form-model-item",{attrs:{prop:"username"}},[r("a-input",{attrs:{size:"large",placeholder:"账号"},model:{value:e.form.username,callback:function(r){e.$set(e.form,"username",r)},expression:"form.username"}},[r("a-icon",{style:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"user"},slot:"prefix"})],1)],1),r("a-form-model-item",{attrs:{prop:"password"}},[r("a-input-password",{attrs:{size:"large",placeholder:"密码"},model:{value:e.form.password,callback:function(r){e.$set(e.form,"password",r)},expression:"form.password"}},[r("a-icon",{style:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"lock"},slot:"prefix"})],1)],1),e.captchaOnOff?r("a-row",{attrs:{gutter:16}},[r("a-col",{staticClass:"gutter-row",attrs:{span:16}},[r("a-form-model-item",{attrs:{prop:"code"}},[r("a-input",{attrs:{size:"large",type:"text",autocomplete:"off",placeholder:"验证码"},model:{value:e.form.code,callback:function(r){e.$set(e.form,"code",r)},expression:"form.code"}},[r("a-icon",{style:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"security-scan"},slot:"prefix"})],1)],1)],1),r("a-col",{staticClass:"gutter-row",attrs:{span:8}},[r("img",{staticClass:"getCaptcha",attrs:{src:e.codeUrl},on:{click:e.getCode}})])],1):e._e(),r("a-form-item",{staticStyle:{"margin-top":"24px"}},[r("a-button",{staticClass:"login-button",attrs:{size:"large",type:"primary",htmlType:"submit",loading:e.logining,disabled:e.logining},on:{click:e.handleSubmit}},[e._v("登 录")])],1),r("div",{staticClass:"user-login-other"})],1)],1)},s=[],a=t("f3f3"),i=(t("d3b7"),t("7ded"));function n(){var e=new Date,r=e.getHours();return r<9?"早上好":r<=11?"上午好":r<=13?"中午好":r<20?"下午好":"晚上好"}var c=t("5880"),l={components:{},data:function(){return{codeUrl:"",isLoginError:!1,loginErrorInfo:"",form:{username:"admin",password:"123456",code:void 0,uuid:"",rememberMe:!1},rules:{username:[{required:!0,message:"请输入帐户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],code:[{required:!0,message:"请输入验证码",trigger:"blur"}]},logining:!1,captchaOnOff:!1}},methods:Object(a["a"])(Object(a["a"])({getCode:function(){var e=this;Object(i["a"])().then((function(r){e.captchaOnOff=void 0===r.captchaOnOff||r.captchaOnOff,e.captchaOnOff&&(e.codeUrl="data:image/gif;base64,"+r.img,e.form.uuid=r.uuid)}))}},Object(c["mapActions"])(["Login","Logout"])),{},{handleSubmit:function(){var e=this;this.logining=!0,this.$refs.form.validate((function(r){r?e.Login(e.form).then((function(r){return e.loginSuccess(r)})).catch((function(r){return e.requestFailed(r)})).finally((function(){})):setTimeout((function(){e.logining=!1}),600)}))},loginSuccess:function(e){var r=this;this.$router.push({path:"/"}),setTimeout((function(){r.$notification.success({message:"欢迎",description:"".concat(n(),"，欢迎回来")})}),1e3),this.handleCloseLoginError()},requestFailed:function(e){this.isLoginError=!0,this.loginErrorInfo=e.msg,this.$set(this.form,"code",""),e.captchaOnOff&&(this.captchaOnOff=void 0===e.captchaOnOff||e.captchaOnOff,this.codeUrl="data:image/gif;base64,"+e.img,this.form.uuid=e.uuid),this.logining=!1},handleCloseLoginError:function(){this.isLoginError=!1,this.loginErrorInfo=""}})},f=l,u=(t("6a71a"),t("2877")),d=Object(u["a"])(f,o,s,!1,null,"7f49ba74",null);r["default"]=d.exports},e0ab:function(e,r,t){}}]);